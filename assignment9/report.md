# Assignment 9

* 氏名: 栗林健太郎
* 学生番号: 2030006
* 作成日: 2020年11月13日

## Vending Machine

本課題では、自動販売機を模したコマンドラインプログラムを実装した。以下では、クラス図、状態図、シーケンス図に基づいて、プログラムについて説明する。

### クラス図

![](./class-diagram.png)

#### `VMCLP`

クラス図に示すクラス群の実行するエンドポイントを提供するクラスである。

入力を文字列として受け取り、指定されたコマンドを実行する。引数のあるコマンド（`insert`および`select`）については、正規表現を用いて、どのコインとアイテムが指定されたかを判定する。

#### `VendingMachine`

自動販売機を表すクラスである。

`Map`インタフェイスを実装した`HashMap`型の属性`cashBox`および`itemBox`によって、それぞれ硬貨と商品の状態（投入された数、購入された数）を保持している。

`insert`メソッドは、指定されたコインを1枚投入するメソッドである。

`select`メソッドは、指定された商品を購入するメソッドである。商品の値段が、`total()`メソッドで得られる投入された硬貨の合計額を計算するより大きい場合、`false`を返す。そうでない場合は、商品を購入し`itemBox`に追加して、`true`を返す。

プライベートメソッド`pay`は、`select`メソッド実行時に支払い処理を担当するメソッドである。50円と100円とを10円に充当することを繰り返すことで、引数として渡された商品の金額に対する引当てを行い、支払い処理をする。

#### `Item`

自動販売機の商品を表すクラスである。列挙型を用いて商品の種別と値段を表現している。コンストラクタと`getCost`メソッドを定義することで、商品の値段を設定、取得できるようにしているところがポイントである。

#### `Coin`

硬貨を表すクラスである。列挙型を用いて硬貨の種別を表現している。

### 状態図

![](./state-diagram.png)



### シーケンス図

![](./sequence-diagram1.png)
![](./sequence-diagram2.png)
![](./sequence-diagram3.png)

##### 実行結果

`VMCLP.java`を実行することで以下の通り動作を確認した。

![](./VMCLP.png)
